<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presenças 2026 - Favela Brass</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #3E0B59 0%, #5A0E7A 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
            font-size: 16px;
            line-height: 1.4;
        }
        .container { max-width: 1000px; margin: 0 auto; }

        /* Password overlay */
        #password-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #3E0B59 0%, #5A0E7A 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        #password-overlay.hidden { display: none; }
        .password-box {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
            max-width: 350px;
        }
        .password-box h2 {
            background: linear-gradient(90deg, #FEF100, #62CC3C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .password-box p {
            color: rgba(255,255,255,0.6);
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        .password-box input {
            width: 100%;
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.05);
            color: #fff;
            font-size: 1em;
            margin-bottom: 15px;
        }
        .password-box input:focus {
            outline: none;
            border-color: #FEF100;
        }
        .password-box button {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            background: linear-gradient(90deg, #FEF100, #62CC3C);
            color: #3E0B59;
            font-weight: bold;
            cursor: pointer;
            font-size: 1em;
        }
        .password-box button:hover {
            opacity: 0.9;
        }
        .password-box .error {
            color: #E74C3C;
            font-size: 0.85em;
            margin-top: 10px;
            display: none;
        }
        .main-content { display: none; }
        .main-content.visible { display: block; }
        h1 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 5px;
            background: linear-gradient(90deg, #FEF100, #62CC3C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            text-align: center;
            color: rgba(255,255,255,0.6);
            margin-bottom: 20px;
            font-size: 1em;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab {
            background: rgba(255,255,255,0.05);
            padding: 10px 18px;
            border-radius: 20px;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.7);
            font-size: 0.95em;
            transition: all 0.2s;
        }
        .tab:hover { background: rgba(255,255,255,0.1); }
        .tab.active {
            background: rgba(254, 241, 0, 0.15);
            color: #FEF100;
            border-color: rgba(254, 241, 0, 0.3);
        }

        /* Content sections */
        .content-section { display: none; }
        .content-section.active { display: block; }

        /* Cards */
        .card {
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .card h2 {
            color: #FEF100;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 1.2em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card h2 .count {
            font-size: 0.7em;
            color: rgba(255,255,255,0.5);
            font-weight: normal;
        }
        .card h3 {
            color: #62CC3C;
            font-size: 1em;
            margin: 15px 0 10px 0;
            padding: 6px 12px;
            background: rgba(98, 204, 60, 0.1);
            border-radius: 6px;
            display: inline-block;
        }

        /* Group list */
        .group-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 12px;
        }
        .group-item {
            background: rgba(255,255,255,0.04);
            border-radius: 8px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .group-item:hover {
            background: rgba(255,255,255,0.08);
        }
        .group-item .name { color: #fff; font-weight: 500; }
        .group-item .stats {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .group-item .count {
            color: rgba(255,255,255,0.5);
            font-size: 0.9em;
        }
        .group-item .pct {
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        .pct.good { background: rgba(98, 204, 60, 0.2); color: #62CC3C; }
        .pct.warning { background: rgba(254, 241, 0, 0.2); color: #FEF100; }
        .pct.danger { background: rgba(231, 76, 60, 0.2); color: #E74C3C; }
        .pct.neutral { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.5); }

        /* Attendance table */
        .attendance-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .attendance-table th,
        .attendance-table td {
            padding: 10px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .attendance-table th {
            color: #FEF100;
            font-weight: 500;
            font-size: 0.9em;
        }
        .attendance-table tr:hover {
            background: rgba(255,255,255,0.03);
        }
        .attendance-table .student-name {
            color: #fff;
        }
        .attendance-table .student-id {
            color: rgba(255,255,255,0.4);
            font-size: 0.85em;
        }

        /* Status indicators */
        .status {
            display: inline-block;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            text-align: center;
            line-height: 24px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .status.P { background: rgba(98, 204, 60, 0.3); color: #62CC3C; }
        .status.F { background: rgba(231, 76, 60, 0.3); color: #E74C3C; }
        .status.J { background: rgba(254, 241, 0, 0.3); color: #FEF100; }
        .status.none { background: rgba(255,255,255,0.05); color: rgba(255,255,255,0.3); }

        /* Summary stats */
        .summary-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .stat-box {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 15px 20px;
            min-width: 120px;
        }
        .stat-box .label {
            color: rgba(255,255,255,0.5);
            font-size: 0.85em;
            margin-bottom: 5px;
        }
        .stat-box .value {
            font-size: 1.5em;
            font-weight: bold;
        }
        .stat-box .value.good { color: #62CC3C; }
        .stat-box .value.warning { color: #FEF100; }
        .stat-box .value.danger { color: #E74C3C; }

        /* Monthly calendar view */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-top: 15px;
        }
        .cal-header {
            background: rgba(254, 241, 0, 0.1);
            color: #FEF100;
            text-align: center;
            padding: 8px 4px;
            font-size: 0.85em;
            border-radius: 4px;
        }
        .cal-day {
            background: rgba(255,255,255,0.03);
            border-radius: 4px;
            padding: 8px;
            min-height: 60px;
            font-size: 0.85em;
        }
        .cal-day .day-num {
            color: rgba(255,255,255,0.4);
            font-size: 0.8em;
        }
        .cal-day.has-data {
            cursor: pointer;
        }
        .cal-day.has-data:hover {
            background: rgba(255,255,255,0.06);
        }
        .cal-day .day-pct {
            font-weight: bold;
            margin-top: 5px;
        }

        /* Alerts */
        .alert {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 15px;
            color: #E74C3C;
        }
        .alert-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* No data message */
        .no-data {
            text-align: center;
            color: rgba(255,255,255,0.5);
            padding: 40px;
        }
        .no-data p {
            margin-bottom: 10px;
        }

        /* Back button */
        .back-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: #fff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        .back-btn:hover {
            background: rgba(255,255,255,0.15);
        }

        /* Footer */
        .footer {
            text-align: center;
            color: rgba(255,255,255,0.4);
            margin-top: 25px;
            font-size: 0.85em;
        }

        /* Student Detail Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
            box-sizing: border-box;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal {
            background: linear-gradient(135deg, #3E0B59 0%, #5A0E7A 100%);
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-header h2 {
            margin: 0;
            background: linear-gradient(90deg, #FEF100, #62CC3C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.3em;
        }
        .modal-close {
            background: rgba(255,255,255,0.1);
            border: none;
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover {
            background: rgba(255,255,255,0.2);
        }
        .modal-body {
            padding: 20px;
        }
        .modal-section {
            margin-bottom: 20px;
        }
        .modal-section h3 {
            color: #FEF100;
            font-size: 0.95em;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .student-info {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .student-info-item {
            background: rgba(255,255,255,0.05);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9em;
        }
        .student-info-item .label {
            color: rgba(255,255,255,0.5);
            font-size: 0.85em;
        }
        .attendance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 8px;
        }
        .attendance-item {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 6px;
            font-size: 0.85em;
        }
        .attendance-item .date {
            color: rgba(255,255,255,0.5);
            font-size: 0.8em;
            margin-bottom: 4px;
        }
        .attendance-item .activity {
            margin-bottom: 4px;
        }
        .attendance-item .status {
            font-weight: bold;
        }
        .attendance-item .status.presente { color: #62CC3C; }
        .attendance-item .status.atrasado { color: #FEF100; }
        .attendance-item .status.falta { color: #E74C3C; }
        .attendance-item .status.justificada { color: #f39c12; }
        .incident-item {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.2);
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        .incident-item .severity {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 8px;
        }
        .incident-item .severity.leve { background: #f1c40f; color: #000; }
        .incident-item .severity.medio { background: #e67e22; color: #fff; }
        .incident-item .severity.grave { background: #e74c3c; color: #fff; }
        .incident-item .date {
            color: rgba(255,255,255,0.5);
            font-size: 0.8em;
        }
        .stats-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .mini-stat {
            background: rgba(255,255,255,0.05);
            padding: 10px 15px;
            border-radius: 6px;
            text-align: center;
            min-width: 80px;
        }
        .mini-stat .value {
            font-size: 1.3em;
            font-weight: bold;
        }
        .mini-stat .label {
            font-size: 0.75em;
            color: rgba(255,255,255,0.5);
        }

        /* Mobile */
        @media (max-width: 600px) {
            body { padding: 12px; font-size: 15px; }
            .group-list { grid-template-columns: 1fr; }
            .summary-stats { gap: 10px; }
            .stat-box { min-width: 100px; padding: 10px 15px; }
        }
    </style>
</head>
<body>
    <!-- Password Protection Overlay -->
    <div id="password-overlay">
        <div class="password-box">
            <h2>Presenças 2026</h2>
            <p>Acesso restrito para equipe Favela Brass</p>
            <input type="password" id="password-input" placeholder="Senha" onkeypress="if(event.key==='Enter')checkPassword()">
            <button onclick="checkPassword()">Entrar</button>
            <p class="error" id="password-error">Senha incorreta</p>
        </div>
    </div>

    <div class="main-content" id="main-content">
    <div class="container">
        <h1>Presenças 2026</h1>
        <p class="subtitle">1º Semestre 2026 - Atualizado 09/02/2026 14:00</p>

        <div class="tabs">
            <div class="tab active" onclick="showSection('grupos')">Por Grupo</div>
            <div class="tab" onclick="showSection('alunos')">Por Aluno</div>
            <div class="tab" onclick="showSection('relatorios')">Relatórios</div>
            <div class="tab" onclick="showSection('escolas')">Escolas</div>
        </div>

        <div id="section-grupos" class="content-section active">
            <div class="card">
                <h2>Bandas</h2>
                <div class="group-list">
                    <div class="group-item" onclick="showGroupDetail('banda', 'Banda Preta')">
                        <span class="name">Banda Preta</span>
                        <span class="stats">
                            <span class="count">21 alunos</span>
                            <span class="pct good">95%</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('banda', 'Banda Roxa')">
                        <span class="name">Banda Roxa</span>
                        <span class="stats">
                            <span class="count">17 alunos</span>
                            <span class="pct good">100%</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('banda', 'Banda Verde')">
                        <span class="name">Banda Verde</span>
                        <span class="stats">
                            <span class="count">10 alunos</span>
                            <span class="pct good">100%</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('banda', 'Banda Amarela')">
                        <span class="name">Banda Amarela</span>
                        <span class="stats">
                            <span class="count">18 alunos</span>
                            <span class="pct neutral">-</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('banda', 'Grupo Semente')">
                        <span class="name">Grupo Semente</span>
                        <span class="stats">
                            <span class="count">8 alunos</span>
                            <span class="pct neutral">-</span>
                        </span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Teoria</h2>
                <div class="group-list">
                    <div class="group-item" onclick="showGroupDetail('teoria', 'teoria_n1_joana')">
                        <span class="name">Teoria N1 Joana</span>
                        <span class="stats">
                            <span class="count">13 alunos</span>
                            <span class="pct good">100%</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('teoria', 'teoria_n1_zola')">
                        <span class="name">Teoria N1 Zola</span>
                        <span class="stats">
                            <span class="count">18 alunos</span>
                            <span class="pct neutral">-</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('teoria', 'teoria_n2_pablo')">
                        <span class="name">Teoria N2 Pablo</span>
                        <span class="stats">
                            <span class="count">13 alunos</span>
                            <span class="pct danger">46%</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('teoria', 'teoria_n2_zola')">
                        <span class="name">Teoria N2 Zola</span>
                        <span class="stats">
                            <span class="count">8 alunos</span>
                            <span class="pct neutral">-</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('teoria', 'teoria_n3_joana')">
                        <span class="name">Teoria N3 Joana</span>
                        <span class="stats">
                            <span class="count">11 alunos</span>
                            <span class="pct danger">0%</span>
                        </span>
                    </div>
                    <div class="group-item" onclick="showGroupDetail('teoria', 'teoria_n3_pablo')">
                        <span class="name">Teoria N3 Pablo</span>
                        <span class="stats">
                            <span class="count">10 alunos</span>
                            <span class="pct danger">0%</span>
                        </span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Aulas Particulares</h2>
                <p style="color: rgba(255,255,255,0.5);">
                    Visualização por professor disponível em /horario.
                    Use /folha para ver horas calculadas.
                </p>
            </div>
        </div>

        <div id="section-alunos" class="content-section">
            <div class="card">
                <h2>Buscar Aluno</h2>
                <input type="text" id="student-search" placeholder="Digite nome ou ID do aluno..."
                       style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);
                              background: rgba(255,255,255,0.05); color: #fff; font-size: 1em;"
                       oninput="filterStudents(this.value)">
            </div>

            <div id="student-list" class="card">
                <h2>Alunos Ativos <span class="count">por banda</span></h2>
                <h3>Banda Preta</h3>
                <div class="group-list">
                    <div class="group-item student-row" data-name="alex lopes de araújo" data-id="10" onclick="showStudentDetail(10)">
                        <span class="name">[10] Alex Lopes de Araújo</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="aryelle luiza de oliveira de souza" data-id="44" onclick="showStudentDetail(44)">
                        <span class="name">[44] Aryelle Luiza de Oliveira de Souza</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="barbara lauanne mendes andré" data-id="47" onclick="showStudentDetail(47)">
                        <span class="name">[47] Barbara Lauanne Mendes André</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="davi leandro costa freitas" data-id="70" onclick="showStudentDetail(70)">
                        <span class="name">[70] Davi Leandro Costa Freitas</span>
                        <span class="count">Sax Barítono</span>
                    </div>
                    <div class="group-item student-row" data-name="edileuza maria da silva" data-id="76" onclick="showStudentDetail(76)">
                        <span class="name">[76] Edileuza Maria da Silva</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="elisabete ramos de oliveira" data-id="81" onclick="showStudentDetail(81)">
                        <span class="name">[81] Elisabete Ramos de Oliveira</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="emilly vitória ferreira de lira" data-id="92" onclick="showStudentDetail(92)">
                        <span class="name">[92] Emilly Vitória Ferreira de Lira</span>
                        <span class="count">Sax Tenor</span>
                    </div>
                    <div class="group-item student-row" data-name="felipe matos barril" data-id="102" onclick="showStudentDetail(102)">
                        <span class="name">[102] Felipe Matos Barril</span>
                        <span class="count">Caixa</span>
                    </div>
                    <div class="group-item student-row" data-name="heron de souza carvalho da cruz" data-id="121" onclick="showStudentDetail(121)">
                        <span class="name">[121] Heron de Souza Carvalho da Cruz</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="ingrid gomes de mesquita" data-id="123" onclick="showStudentDetail(123)">
                        <span class="name">[123] Ingrid Gomes de Mesquita</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="juan bento nascimento naszewski" data-id="147" onclick="showStudentDetail(147)">
                        <span class="name">[147] Juan Bento Nascimento Naszewski</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="lucia dos santos thomaz" data-id="194" onclick="showStudentDetail(194)">
                        <span class="name">[194] Lucia dos Santos Thomaz</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="luiz henrique lopes da silva" data-id="198" onclick="showStudentDetail(198)">
                        <span class="name">[198] Luiz Henrique Lopes da Silva</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="marcelo pereira júnior" data-id="207" onclick="showStudentDetail(207)">
                        <span class="name">[207] Marcelo Pereira Júnior</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="marcos felipe andrade clemente" data-id="208" onclick="showStudentDetail(208)">
                        <span class="name">[208] Marcos Felipe Andrade Clemente</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="maria antônia machado monteiro maia" data-id="213" onclick="showStudentDetail(213)">
                        <span class="name">[213] Maria Antônia Machado Monteiro Maia</span>
                        <span class="count">Sax Tenor</span>
                    </div>
                    <div class="group-item student-row" data-name="maria eduarda santos da silva" data-id="225" onclick="showStudentDetail(225)">
                        <span class="name">[225] Maria Eduarda Santos da Silva</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="maria helena oliveira santana" data-id="228" onclick="showStudentDetail(228)">
                        <span class="name">[228] Maria Helena Oliveira Santana</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="maria rita lemos almeida" data-id="233" onclick="showStudentDetail(233)">
                        <span class="name">[233] Maria Rita Lemos Almeida</span>
                        <span class="count">Sax Tenor</span>
                    </div>
                    <div class="group-item student-row" data-name="rafael dos santos silva" data-id="285" onclick="showStudentDetail(285)">
                        <span class="name">[285] Rafael dos Santos Silva</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="ryan pereira" data-id="301" onclick="showStudentDetail(301)">
                        <span class="name">[301] Ryan Pereira</span>
                        <span class="count">Sax Tenor</span>
                    </div>
                </div>
                <h3>Banda Roxa</h3>
                <div class="group-list">
                    <div class="group-item student-row" data-name="anita novaes alijó" data-id="30" onclick="showStudentDetail(30)">
                        <span class="name">[30] Anita Novaes Alijó</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="arthur julio batista de oliveira do ramos" data-id="39" onclick="showStudentDetail(39)">
                        <span class="name">[39] Arthur Julio Batista de Oliveira do Ramos</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="arthur lopes de araújo" data-id="41" onclick="showStudentDetail(41)">
                        <span class="name">[41] Arthur Lopes de Araújo</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="carlos henrique de castro cavalcante" data-id="60" onclick="showStudentDetail(60)">
                        <span class="name">[60] Carlos Henrique de Castro Cavalcante</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="emilly teixeira de assis oliveira" data-id="91" onclick="showStudentDetail(91)">
                        <span class="name">[91] Emilly Teixeira de Assis Oliveira</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="kauê alexandro santos alves" data-id="163" onclick="showStudentDetail(163)">
                        <span class="name">[163] Kauê Alexandro Santos Alves</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="larissa paiva da silva" data-id="175" onclick="showStudentDetail(175)">
                        <span class="name">[175] Larissa Paiva da Silva</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="letícia ferreira de barros" data-id="181" onclick="showStudentDetail(181)">
                        <span class="name">[181] Letícia Ferreira de Barros</span>
                        <span class="count">Sax Tenor</span>
                    </div>
                    <div class="group-item student-row" data-name="maria antonia nadaf de vasconcellos nunes freire" data-id="214" onclick="showStudentDetail(214)">
                        <span class="name">[214] Maria Antonia Nadaf de Vasconcellos Nunes Freire</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="maria fernanda bezerra de oliveira" data-id="226" onclick="showStudentDetail(226)">
                        <span class="name">[226] Maria Fernanda Bezerra de Oliveira</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="miguel miletson dos santos araujo" data-id="252" onclick="showStudentDetail(252)">
                        <span class="name">[252] Miguel Miletson dos Santos Araujo</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="rafael alves queiroz rodrigues" data-id="283" onclick="showStudentDetail(283)">
                        <span class="name">[283] Rafael Alves Queiroz Rodrigues</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="rayane souza borges" data-id="292" onclick="showStudentDetail(292)">
                        <span class="name">[292] Rayane Souza Borges</span>
                        <span class="count">Sax Tenor</span>
                    </div>
                    <div class="group-item student-row" data-name="ronald daniel pires do nascimento" data-id="299" onclick="showStudentDetail(299)">
                        <span class="name">[299] Ronald Daniel Pires do Nascimento</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="ryan cantoni nogueira" data-id="300" onclick="showStudentDetail(300)">
                        <span class="name">[300] Ryan Cantoni Nogueira</span>
                        <span class="count">Sax Tenor</span>
                    </div>
                    <div class="group-item student-row" data-name="sara santos barros" data-id="305" onclick="showStudentDetail(305)">
                        <span class="name">[305] Sara Santos Barros</span>
                        <span class="count">Caixa</span>
                    </div>
                    <div class="group-item student-row" data-name="valentina flor pimentel diniz" data-id="328" onclick="showStudentDetail(328)">
                        <span class="name">[328] Valentina Flor Pimentel Diniz</span>
                        <span class="count">Sax Alto</span>
                    </div>
                </div>
                <h3>Banda Verde</h3>
                <div class="group-list">
                    <div class="group-item student-row" data-name="aisha matos barril" data-id="9" onclick="showStudentDetail(9)">
                        <span class="name">[9] Aisha Matos Barril</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="beatriz costa nogueira dos santos" data-id="49" onclick="showStudentDetail(49)">
                        <span class="name">[49] Beatriz Costa Nogueira dos Santos</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="gustavo gomes dos santos" data-id="116" onclick="showStudentDetail(116)">
                        <span class="name">[116] Gustavo Gomes dos Santos</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="isadora da silva nascimento" data-id="130" onclick="showStudentDetail(130)">
                        <span class="name">[130] Isadora da Silva Nascimento</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="joão pedro ferreira martins" data-id="139" onclick="showStudentDetail(139)">
                        <span class="name">[139] João Pedro Ferreira Martins</span>
                        <span class="count">Sax Tenor</span>
                    </div>
                    <div class="group-item student-row" data-name="maria antônia ribeiro coelho de souza e silva" data-id="215" onclick="showStudentDetail(215)">
                        <span class="name">[215] Maria Antônia Ribeiro Coelho de Souza e Silva</span>
                        <span class="count">Caixa</span>
                    </div>
                    <div class="group-item student-row" data-name="maria luiza de souza araújo" data-id="230" onclick="showStudentDetail(230)">
                        <span class="name">[230] Maria Luiza de Souza Araújo</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="maria manuele da silva cordeiro" data-id="232" onclick="showStudentDetail(232)">
                        <span class="name">[232] Maria Manuele da Silva Cordeiro</span>
                        <span class="count">Sax Alto</span>
                    </div>
                    <div class="group-item student-row" data-name="raissa mendes de oliveira da silva" data-id="290" onclick="showStudentDetail(290)">
                        <span class="name">[290] Raissa Mendes de Oliveira da Silva</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="vitória matos oliveira" data-id="335" onclick="showStudentDetail(335)">
                        <span class="name">[335] Vitória Matos Oliveira</span>
                        <span class="count">Trombone</span>
                    </div>
                </div>
                <h3>Banda Amarela</h3>
                <div class="group-list">
                    <div class="group-item student-row" data-name="alice sabino bonfim" data-id="14" onclick="showStudentDetail(14)">
                        <span class="name">[14] Alice Sabino Bonfim</span>
                        <span class="count">Caixa</span>
                    </div>
                    <div class="group-item student-row" data-name="ana laura andrade clemente" data-id="21" onclick="showStudentDetail(21)">
                        <span class="name">[21] Ana Laura Andrade Clemente</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="andressa de assis oliveira" data-id="27" onclick="showStudentDetail(27)">
                        <span class="name">[27] Andressa de Assis Oliveira</span>
                        <span class="count">Percussão (geral)</span>
                    </div>
                    <div class="group-item student-row" data-name="arthur bezerra de sousa dias" data-id="38" onclick="showStudentDetail(38)">
                        <span class="name">[38] Arthur Bezerra de Sousa Dias</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="beahtriz milagres ramos dos santos" data-id="48" onclick="showStudentDetail(48)">
                        <span class="name">[48] Beahtriz Milagres Ramos dos Santos</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="daniella vitoria da silva celestrino" data-id="66" onclick="showStudentDetail(66)">
                        <span class="name">[66] Daniella Vitoria da Silva Celestrino</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="gerson silveira neto" data-id="110" onclick="showStudentDetail(110)">
                        <span class="name">[110] Gerson Silveira Neto</span>
                        <span class="count">Sax Alto</span>
                    </div>
                    <div class="group-item student-row" data-name="isabella frança maia" data-id="125" onclick="showStudentDetail(125)">
                        <span class="name">[125] Isabella França Maia</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="isac nunes da silva" data-id="129" onclick="showStudentDetail(129)">
                        <span class="name">[129] Isac Nunes da Silva</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="maria júlia gomes alcântara" data-id="229" onclick="showStudentDetail(229)">
                        <span class="name">[229] Maria Júlia Gomes Alcântara</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="miguel freitas lira" data-id="249" onclick="showStudentDetail(249)">
                        <span class="name">[249] Miguel Freitas Lira</span>
                        <span class="count">Percussão (geral)</span>
                    </div>
                    <div class="group-item student-row" data-name="nicole mendes de oliveira da silva" data-id="265" onclick="showStudentDetail(265)">
                        <span class="name">[265] Nicole Mendes de Oliveira da Silva</span>
                        <span class="count">Sax Alto</span>
                    </div>
                    <div class="group-item student-row" data-name="paola peixoto alves graciano" data-id="272" onclick="showStudentDetail(272)">
                        <span class="name">[272] Paola Peixoto Alves Graciano</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="pierre frança de oliveira" data-id="277" onclick="showStudentDetail(277)">
                        <span class="name">[277] Pierre França de Oliveira</span>
                        <span class="count">Percussão (geral)</span>
                    </div>
                    <div class="group-item student-row" data-name="sophia morais de freitas borges" data-id="313" onclick="showStudentDetail(313)">
                        <span class="name">[313] Sophia Morais de Freitas Borges</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="suellen gustavo pena teixeira" data-id="318" onclick="showStudentDetail(318)">
                        <span class="name">[318] Suellen Gustavo Pena Teixeira</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="tiê nascimento fontes" data-id="326" onclick="showStudentDetail(326)">
                        <span class="name">[326] Tiê Nascimento Fontes</span>
                        <span class="count">Caixa</span>
                    </div>
                </div>
                <h3>Grupo Semente</h3>
                <div class="group-list">
                    <div class="group-item student-row" data-name="bernardo lucca figueiredo de souza" data-id="53" onclick="showStudentDetail(53)">
                        <span class="name">[53] Bernardo Lucca Figueiredo de Souza</span>
                        <span class="count">Caixa</span>
                    </div>
                    <div class="group-item student-row" data-name="kailany rodrigues de sousa" data-id="154" onclick="showStudentDetail(154)">
                        <span class="name">[154] Kailany Rodrigues de Sousa</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="karina lúcia soares moreno" data-id="156" onclick="showStudentDetail(156)">
                        <span class="name">[156] Karina Lúcia Soares Moreno</span>
                        <span class="count">Surdo</span>
                    </div>
                    <div class="group-item student-row" data-name="kauany cristina rodrigues de sousa" data-id="162" onclick="showStudentDetail(162)">
                        <span class="name">[162] Kauany Cristina Rodrigues de Sousa</span>
                        <span class="count">Trombone</span>
                    </div>
                    <div class="group-item student-row" data-name="larissa teixeira lopes neves" data-id="176" onclick="showStudentDetail(176)">
                        <span class="name">[176] Larissa Teixeira Lopes Neves</span>
                        <span class="count">Trompete</span>
                    </div>
                    <div class="group-item student-row" data-name="maria fernanda de oliveira da silva" data-id="227" onclick="showStudentDetail(227)">
                        <span class="name">[227] Maria Fernanda de Oliveira da Silva</span>
                        <span class="count">Caixa</span>
                    </div>
                    <div class="group-item student-row" data-name="marina machado monteiro maia" data-id="236" onclick="showStudentDetail(236)">
                        <span class="name">[236] Marina Machado Monteiro Maia</span>
                        <span class="count">Caixa</span>
                    </div>
                    <div class="group-item student-row" data-name="sophia torres cunha" data-id="316" onclick="showStudentDetail(316)">
                        <span class="name">[316] Sophia Torres Cunha</span>
                        <span class="count">Surdo</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="section-relatorios" class="content-section">
            <div class="card">
                <h2>Relatório Mensal - Fevereiro 2026</h2>

                <div class="summary-stats">
                    <div class="stat-box">
                        <div class="label">Total de Sessões</div>
                        <div class="value">20</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Presença Geral</div>
                        <div class="value warning">77%</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Presenças</div>
                        <div class="value good">110</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Faltas</div>
                        <div class="value danger">33</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Fichas Mensais para WhatsApp</h2>
                <p style="color: rgba(255,255,255,0.5); margin-bottom: 15px;">
                    Selecione uma banda para gerar fichas individuais que podem ser enviadas aos responsáveis.
                </p>
                <div class="group-list">
                    <div class="group-item" onclick="generateMonthlyCards('Banda Preta')">
                        <span class="name">Banda Preta</span>
                        <span class="count">Gerar fichas</span>
                    </div>
                    <div class="group-item" onclick="generateMonthlyCards('Banda Roxa')">
                        <span class="name">Banda Roxa</span>
                        <span class="count">Gerar fichas</span>
                    </div>
                    <div class="group-item" onclick="generateMonthlyCards('Banda Verde')">
                        <span class="name">Banda Verde</span>
                        <span class="count">Gerar fichas</span>
                    </div>
                    <div class="group-item" onclick="generateMonthlyCards('Banda Amarela')">
                        <span class="name">Banda Amarela</span>
                        <span class="count">Gerar fichas</span>
                    </div>
                    <div class="group-item" onclick="generateMonthlyCards('Grupo Semente')">
                        <span class="name">Grupo Semente</span>
                        <span class="count">Gerar fichas</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Alertas de Frequência</h2>
                <div class="alert">
                    <div class="alert-title">[285] Rafael dos Santos Silva - Banda Preta</div>
                    2 falta(s) injustificada(s) este semestre - Em observação
                </div>
                <div class="alert">
                    <div class="alert-title">[290] Raissa Mendes de Oliveira da Silva - Banda Verde</div>
                    2 falta(s) injustificada(s) este semestre - Em observação
                </div>
                <div class="alert">
                    <div class="alert-title">[9] Aisha Matos Barril - Banda Verde</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[10] Alex Lopes de Araújo - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[30] Anita Novaes Alijó - Banda Roxa</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[41] Arthur Lopes de Araújo - Banda Roxa</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[44] Aryelle Luiza de Oliveira de Souza - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[47] Barbara Lauanne Mendes André - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[49] Beatriz Costa Nogueira dos Santos - Banda Verde</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[60] Carlos Henrique de Castro Cavalcante - Banda Roxa</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[76] Edileuza Maria da Silva - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[81] Elisabete Ramos de Oliveira - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[92] Emilly Vitória Ferreira de Lira - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[102] Felipe Matos Barril - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[116] Gustavo Gomes dos Santos - Banda Verde</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[121] Heron de Souza Carvalho da Cruz - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[123] Ingrid Gomes de Mesquita - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[139] João Pedro Ferreira Martins - Banda Verde</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[147] Juan Bento Nascimento Naszewski - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[175] Larissa Paiva da Silva - Banda Roxa</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[207] Marcelo Pereira Júnior - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[214] Maria Antonia Nadaf de Vasconcellos Nunes Freire - Banda Roxa</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[213] Maria Antônia Machado Monteiro Maia - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[225] Maria Eduarda Santos da Silva - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[232] Maria Manuele da Silva Cordeiro - Banda Verde</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[233] Maria Rita Lemos Almeida - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[283] Rafael Alves Queiroz Rodrigues - Banda Roxa</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[300] Ryan Cantoni Nogueira - Banda Roxa</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[301] Ryan Pereira - Banda Preta</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[328] Valentina Flor Pimentel Diniz - Banda Roxa</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
                <div class="alert">
                    <div class="alert-title">[335] Vitória Matos Oliveira - Banda Verde</div>
                    1 falta(s) injustificada(s) este semestre - 1ª advertência
                </div>
            </div>
        </div>

        <div id="section-escolas" class="content-section">
            <div class="card">
                <h2>Oficinas nas Escolas</h2>
                <div class="no-data">
                    <p>Sistema de presença para oficinas nas escolas em desenvolvimento.</p>
                    <p>Dados serão adicionados quando os grupos escolares forem configurados.</p>
                </div>
            </div>
        </div>

        <p class="footer">Favela Brass - Sistema de Presenças · 09/02/2026 14:00</p>
    </div>
    </div><!-- end main-content -->

    <!-- Student Detail Modal -->
    <div class="modal-overlay" id="student-modal" onclick="if(event.target === this) closeModal()">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-title">Detalhes do Aluno</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Content populated by JS -->
            </div>
        </div>
    </div>

    <script>
        // Student data
        const studentData = {"9": {"id": 9, "name": "Aisha Matos Barril", "band": "Banda Verde", "instrument": "Trompete", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Raffaella Goi", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "10": {"id": 10, "name": "Alex Lopes de Araújo", "band": "Banda Preta", "instrument": "Trombone", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "14": {"id": 14, "name": "Alice Sabino Bonfim", "band": "Banda Amarela", "instrument": "Caixa", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "21": {"id": 21, "name": "Ana Laura Andrade Clemente", "band": "Banda Amarela", "instrument": "Trompete", "theory": "teoria_n2_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "27": {"id": 27, "name": "Andressa de Assis Oliveira", "band": "Banda Amarela", "instrument": "Percussão (geral)", "theory": "teoria_n2_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "30": {"id": 30, "name": "Anita Novaes Alijó", "band": "Banda Roxa", "instrument": "Trompete", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "38": {"id": 38, "name": "Arthur Bezerra de Sousa Dias", "band": "Banda Amarela", "instrument": "Trompete", "theory": "teoria_n2_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "39": {"id": 39, "name": "Arthur Julio Batista de Oliveira do Ramos", "band": "Banda Roxa", "instrument": "Surdo", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-06", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "41": {"id": 41, "name": "Arthur Lopes de Araújo", "band": "Banda Roxa", "instrument": "Trompete", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "44": {"id": 44, "name": "Aryelle Luiza de Oliveira de Souza", "band": "Banda Preta", "instrument": "Trompete", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 4, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "47": {"id": 47, "name": "Barbara Lauanne Mendes André", "band": "Banda Preta", "instrument": "Surdo", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-05", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "48": {"id": 48, "name": "Beahtriz Milagres Ramos dos Santos", "band": "Banda Amarela", "instrument": "Trompete", "theory": "teoria_n2_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "49": {"id": 49, "name": "Beatriz Costa Nogueira dos Santos", "band": "Banda Verde", "instrument": "Trompete", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Raffaella Goi", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "53": {"id": 53, "name": "Bernardo Lucca Figueiredo de Souza", "band": "Grupo Semente", "instrument": "Caixa", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "60": {"id": 60, "name": "Carlos Henrique de Castro Cavalcante", "band": "Banda Roxa", "instrument": "Trombone", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "66": {"id": 66, "name": "Daniella Vitoria da Silva Celestrino", "band": "Banda Amarela", "instrument": "Surdo", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "70": {"id": 70, "name": "Davi Leandro Costa Freitas", "band": "Banda Preta", "instrument": "Sax Barítono", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 3, "pratica_internal": false, "teoria_level": null, "teoria_internal": null}, "76": {"id": 76, "name": "Edileuza Maria da Silva", "band": "Banda Preta", "instrument": "Trombone", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 5, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "81": {"id": 81, "name": "Elisabete Ramos de Oliveira", "band": "Banda Preta", "instrument": "Surdo", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-05", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "falta_nao_justificada"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "91": {"id": 91, "name": "Emilly Teixeira de Assis Oliveira", "band": "Banda Roxa", "instrument": "Trombone", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "92": {"id": 92, "name": "Emilly Vitória Ferreira de Lira", "band": "Banda Preta", "instrument": "Sax Tenor", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "102": {"id": 102, "name": "Felipe Matos Barril", "band": "Banda Preta", "instrument": "Caixa", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-05", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "110": {"id": 110, "name": "Gerson Silveira Neto", "band": "Banda Amarela", "instrument": "Sax Alto", "theory": "teoria_n2_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "116": {"id": 116, "name": "Gustavo Gomes dos Santos", "band": "Banda Verde", "instrument": "Trombone", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "falta_nao_justificada"}], "incidents": [], "stats": {"total": 2, "presente": 1, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "121": {"id": 121, "name": "Heron de Souza Carvalho da Cruz", "band": "Banda Preta", "instrument": "Trompete", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 4, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "123": {"id": 123, "name": "Ingrid Gomes de Mesquita", "band": "Banda Preta", "instrument": "Trombone", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "125": {"id": 125, "name": "Isabella França Maia", "band": "Banda Amarela", "instrument": "Trompete", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "129": {"id": 129, "name": "Isac Nunes da Silva", "band": "Banda Amarela", "instrument": "Trombone", "theory": "teoria_n2_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "130": {"id": 130, "name": "Isadora da Silva Nascimento", "band": "Banda Verde", "instrument": "Trombone", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Shanso Araújo", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "139": {"id": 139, "name": "João Pedro Ferreira Martins", "band": "Banda Verde", "instrument": "Sax Tenor", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "presente"}, {"date": "2026-02-05", "activity_type": "banda", "activity_name": "Banda Preta", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}], "incidents": [], "stats": {"total": 4, "presente": 3, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "147": {"id": 147, "name": "Juan Bento Nascimento Naszewski", "band": "Banda Preta", "instrument": "Trombone", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "154": {"id": 154, "name": "Kailany Rodrigues de Sousa", "band": "Grupo Semente", "instrument": "Trombone", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "156": {"id": 156, "name": "Karina Lúcia Soares Moreno", "band": "Grupo Semente", "instrument": "Surdo", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "162": {"id": 162, "name": "Kauany Cristina Rodrigues de Sousa", "band": "Grupo Semente", "instrument": "Trombone", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "163": {"id": 163, "name": "Kauê Alexandro Santos Alves", "band": "Banda Roxa", "instrument": "Surdo", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-06", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "175": {"id": 175, "name": "Larissa Paiva da Silva", "band": "Banda Roxa", "instrument": "Trompete", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "176": {"id": 176, "name": "Larissa Teixeira Lopes Neves", "band": "Grupo Semente", "instrument": "Trompete", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "181": {"id": 181, "name": "Letícia Ferreira de Barros", "band": "Banda Roxa", "instrument": "Sax Tenor", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "198": {"id": 198, "name": "Luiz Henrique Lopes da Silva", "band": "Banda Preta", "instrument": "Surdo", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-05", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "207": {"id": 207, "name": "Marcelo Pereira Júnior", "band": "Banda Preta", "instrument": "Trompete", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 5, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "208": {"id": 208, "name": "Marcos Felipe Andrade Clemente", "band": "Banda Preta", "instrument": "Trompete", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "presente"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 3, "pratica_internal": false, "teoria_level": 1, "teoria_internal": true}, "213": {"id": 213, "name": "Maria Antônia Machado Monteiro Maia", "band": "Banda Preta", "instrument": "Sax Tenor", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "214": {"id": 214, "name": "Maria Antonia Nadaf de Vasconcellos Nunes Freire", "band": "Banda Roxa", "instrument": "Trombone", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "215": {"id": 215, "name": "Maria Antônia Ribeiro Coelho de Souza e Silva", "band": "Banda Verde", "instrument": "Caixa", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}], "incidents": [], "stats": {"total": 2, "presente": 2, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "225": {"id": 225, "name": "Maria Eduarda Santos da Silva", "band": "Banda Preta", "instrument": "Trombone", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 4, "pratica_internal": false, "teoria_level": 1, "teoria_internal": true}, "226": {"id": 226, "name": "Maria Fernanda Bezerra de Oliveira", "band": "Banda Roxa", "instrument": "Surdo", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-06", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "227": {"id": 227, "name": "Maria Fernanda de Oliveira da Silva", "band": "Grupo Semente", "instrument": "Caixa", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "228": {"id": 228, "name": "Maria Helena Oliveira Santana", "band": "Banda Preta", "instrument": "Surdo", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "presente"}, {"date": "2026-02-05", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "229": {"id": 229, "name": "Maria Júlia Gomes Alcântara", "band": "Banda Amarela", "instrument": "Trompete", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "230": {"id": 230, "name": "Maria Luiza de Souza Araújo", "band": "Banda Verde", "instrument": "Surdo", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}], "incidents": [], "stats": {"total": 2, "presente": 2, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "232": {"id": 232, "name": "Maria Manuele da Silva Cordeiro", "band": "Banda Verde", "instrument": "Sax Alto", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "presente"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}], "incidents": [], "stats": {"total": 4, "presente": 3, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "233": {"id": 233, "name": "Maria Rita Lemos Almeida", "band": "Banda Preta", "instrument": "Sax Tenor", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 4, "pratica_internal": false, "teoria_level": 1, "teoria_internal": true}, "236": {"id": 236, "name": "Marina Machado Monteiro Maia", "band": "Grupo Semente", "instrument": "Caixa", "theory": "teoria_n2_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": 1, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "249": {"id": 249, "name": "Miguel Freitas Lira", "band": "Banda Amarela", "instrument": "Percussão (geral)", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "252": {"id": 252, "name": "Miguel Miletson dos Santos Araujo", "band": "Banda Roxa", "instrument": "Trombone", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "presente"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Pablo Beato", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "265": {"id": 265, "name": "Nicole Mendes de Oliveira da Silva", "band": "Banda Amarela", "instrument": "Sax Alto", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "272": {"id": 272, "name": "Paola Peixoto Alves Graciano", "band": "Banda Amarela", "instrument": "Trompete", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "277": {"id": 277, "name": "Pierre França de Oliveira", "band": "Banda Amarela", "instrument": "Percussão (geral)", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "283": {"id": 283, "name": "Rafael Alves Queiroz Rodrigues", "band": "Banda Roxa", "instrument": "Trompete", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 3, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "285": {"id": 285, "name": "Rafael dos Santos Silva", "band": "Banda Preta", "instrument": "Trompete", "theory": "teoria_n3_joana", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_joana", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Joe Epstein", "status": "falta_nao_justificada"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 1, "atrasado": 0, "falta": 2, "justificada": 0}, "pratica_level": 6, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "290": {"id": 290, "name": "Raissa Mendes de Oliveira da Silva", "band": "Banda Verde", "instrument": "Trompete", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Raffaella Goi", "status": "falta_nao_justificada"}], "incidents": [], "stats": {"total": 3, "presente": 1, "atrasado": 0, "falta": 2, "justificada": 0}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "292": {"id": 292, "name": "Rayane Souza Borges", "band": "Banda Roxa", "instrument": "Sax Tenor", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "presente"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "299": {"id": 299, "name": "Ronald Daniel Pires do Nascimento", "band": "Banda Roxa", "instrument": "Surdo", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-06", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "300": {"id": 300, "name": "Ryan Cantoni Nogueira", "band": "Banda Roxa", "instrument": "Sax Tenor", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "301": {"id": 301, "name": "Ryan Pereira", "band": "Banda Preta", "instrument": "Sax Tenor", "theory": "teoria_n3_pablo", "attendance": [{"date": "2026-02-09", "activity_type": "teoria", "activity_name": "teoria_n3_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-04", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}, {"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 4, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "305": {"id": 305, "name": "Sara Santos Barros", "band": "Banda Roxa", "instrument": "Caixa", "theory": "teoria_n1_joana", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n1_joana", "status": "presente"}, {"date": "2026-02-06", "activity_type": "aula_individual", "activity_name": "Anderson Clayton", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 3, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "313": {"id": 313, "name": "Sophia Morais de Freitas Borges", "band": "Banda Amarela", "instrument": "Trompete", "theory": "teoria_n2_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "316": {"id": 316, "name": "Sophia Torres Cunha", "band": "Grupo Semente", "instrument": "Surdo", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": 1, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "318": {"id": 318, "name": "Suellen Gustavo Pena Teixeira", "band": "Banda Amarela", "instrument": "Trompete", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": 2, "pratica_internal": true, "teoria_level": null, "teoria_internal": null}, "326": {"id": 326, "name": "Tiê Nascimento Fontes", "band": "Banda Amarela", "instrument": "Caixa", "theory": "teoria_n1_zola", "attendance": [], "incidents": [], "stats": {"total": 0, "presente": null, "atrasado": null, "falta": null, "justificada": null}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "328": {"id": 328, "name": "Valentina Flor Pimentel Diniz", "band": "Banda Roxa", "instrument": "Sax Alto", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Roxa", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-02", "activity_type": "aula_individual", "activity_name": "Joana Saraiva", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": 2, "pratica_internal": true, "teoria_level": 1, "teoria_internal": true}, "335": {"id": 335, "name": "Vitória Matos Oliveira", "band": "Banda Verde", "instrument": "Trombone", "theory": "teoria_n2_pablo", "attendance": [{"date": "2026-02-06", "activity_type": "banda", "activity_name": "Banda Verde", "status": "presente"}, {"date": "2026-02-06", "activity_type": "teoria", "activity_name": "teoria_n2_pablo", "status": "falta_nao_justificada"}, {"date": "2026-02-03", "activity_type": "aula_individual", "activity_name": "Shanso Araújo", "status": "presente"}], "incidents": [], "stats": {"total": 3, "presente": 2, "atrasado": 0, "falta": 1, "justificada": 0}, "pratica_level": null, "pratica_internal": null, "teoria_level": null, "teoria_internal": null}, "194": {"id": 194, "name": "Lucia dos Santos Thomaz", "band": "Banda Preta", "instrument": "Trompete", "theory": "", "attendance": [{"date": "2026-02-02", "activity_type": "banda", "activity_name": "Banda Preta", "status": "presente"}], "incidents": [], "stats": {"total": 1, "presente": 1, "atrasado": 0, "falta": 0, "justificada": 0}, "pratica_level": 3, "pratica_internal": false, "teoria_level": null, "teoria_internal": null}};
        const groupData = {"banda": {"Banda Preta": [10, 44, 47, 70, 76, 81, 92, 102, 121, 123, 147, 194, 198, 207, 208, 213, 225, 228, 233, 285, 301], "Banda Roxa": [30, 39, 41, 60, 91, 163, 175, 181, 214, 226, 252, 283, 292, 299, 300, 305, 328], "Banda Verde": [9, 49, 116, 130, 139, 215, 230, 232, 290, 335], "Banda Amarela": [14, 21, 27, 38, 48, 66, 110, 125, 129, 229, 249, 265, 272, 277, 313, 318, 326], "Grupo Semente": [53, 154, 156, 162, 176, 227, 236, 316]}, "teoria": {"teoria_n1_joana": [39, 70, 81, 91, 130, 163, 181, 198, 215, 226, 230, 299, 305], "teoria_n1_zola": [14, 53, 66, 125, 154, 156, 162, 176, 227, 229, 249, 265, 272, 277, 316, 318, 326], "teoria_n2_pablo": [60, 92, 116, 139, 208, 228, 232, 252, 290, 292, 300, 328, 335], "teoria_n2_zola": [21, 27, 38, 48, 110, 129, 236, 313], "teoria_n3_joana": [10, 44, 76, 102, 121, 123, 147, 214, 213, 283, 285], "teoria_n3_pablo": [9, 30, 41, 47, 49, 175, 207, 225, 233, 301]}};

        // Password check
        const CORRECT_HASH = 'amigosdacacilda';

        function checkPassword() {
            const input = document.getElementById('password-input').value;
            if (input === CORRECT_HASH) {
                document.getElementById('password-overlay').classList.add('hidden');
                document.getElementById('main-content').classList.add('visible');
                localStorage.setItem('fb-presencas-auth', 'true');
            } else {
                document.getElementById('password-error').style.display = 'block';
                document.getElementById('password-input').value = '';
            }
        }

        // Check for saved auth on page load
        if (localStorage.getItem('fb-presencas-auth') === 'true') {
            document.getElementById('password-overlay').classList.add('hidden');
            document.getElementById('main-content').classList.add('visible');
        }

        function showSection(name) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById('section-' + name).classList.add('active');
            event.target.classList.add('active');
        }

        function filterStudents(query) {
            query = query.toLowerCase();
            document.querySelectorAll('.student-row').forEach(row => {
                const name = row.dataset.name;
                const id = row.dataset.id;
                if (name.includes(query) || id.includes(query)) {
                    row.style.display = 'flex';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function showGroupDetail(type, name) {
            const studentIds = groupData[type]?.[name];
            if (!studentIds || studentIds.length === 0) {
                alert('Grupo não encontrado: ' + name);
                return;
            }

            // Get students in this group
            const students = studentIds.map(id => studentData[id]).filter(s => s);

            // Display name for teoria classes
            const displayName = type === 'teoria'
                ? name.replace('teoria_', 'Teoria ').replace('_', ' ').toUpperCase()
                : name;

            // Collect all attendance dates for this group
            const dateMap = {};  // date -> {studentId -> status}
            for (const student of students) {
                for (const a of (student.attendance || [])) {
                    // Filter by activity type and name
                    if (a.activity_type === type && a.activity_name === name) {
                        if (!dateMap[a.date]) dateMap[a.date] = {};
                        dateMap[a.date][student.id] = a.status;
                    }
                }
            }

            // Sort dates descending
            const dates = Object.keys(dateMap).sort().reverse();

            // Build modal content
            let html = '';

            // Summary stats
            let present = 0, late = 0, absent = 0;
            for (const date of dates) {
                for (const student of students) {
                    const status = dateMap[date]?.[student.id];
                    if (status === 'presente') present++;
                    else if (status === 'atrasado') { present++; late++; }
                    else if (status === 'falta' || status === 'falta_nao_justificada') absent++;
                }
            }

            html += '<div class="modal-section"><h3>Resumo do Mês</h3><div class="stats-row">';
            html += `<div class="mini-stat"><div class="value">${students.length}</div><div class="label">Alunos</div></div>`;
            html += `<div class="mini-stat"><div class="value">${dates.length}</div><div class="label">Registros</div></div>`;
            html += `<div class="mini-stat"><div class="value" style="color:#62CC3C">${present}</div><div class="label">Presenças</div></div>`;
            html += `<div class="mini-stat"><div class="value" style="color:#E74C3C">${absent}</div><div class="label">Faltas</div></div>`;
            html += '</div></div>';

            // Attendance by date
            if (dates.length === 0) {
                html += '<div class="no-data"><p>Nenhum registro de presença ainda.</p>';
                html += '<p>Use /presenca ' + (type === 'banda' ? name.toLowerCase().replace('banda ', '') : name) + ' no Slack.</p></div>';
            } else {
                html += '<div class="modal-section"><h3>Presenças por Data</h3>';
                for (const date of dates) {
                    const dayData = dateMap[date];
                    const dayPresent = students.filter(s => ['presente', 'atrasado'].includes(dayData[s.id])).length;
                    const pct = Math.round(dayPresent / students.length * 100);

                    html += `<div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 12px; margin-bottom: 8px;">`;
                    html += `<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">`;
                    html += `<strong>${date}</strong>`;
                    html += `<span style="color: ${pct >= 75 ? '#62CC3C' : '#FEF100'}">${pct}% (${dayPresent}/${students.length})</span>`;
                    html += `</div>`;

                    // Show absent students
                    const absentStudents = students.filter(s => ['falta', 'falta_nao_justificada'].includes(dayData[s.id]));
                    const lateStudents = students.filter(s => dayData[s.id] === 'atrasado');

                    if (absentStudents.length > 0) {
                        html += `<div style="color: #E74C3C; font-size: 0.9em;">❌ Faltas: ${absentStudents.map(s => s.name.split(' ')[0]).join(', ')}</div>`;
                    }
                    if (lateStudents.length > 0) {
                        html += `<div style="color: #FEF100; font-size: 0.9em;">⏰ Atrasos: ${lateStudents.map(s => s.name.split(' ')[0]).join(', ')}</div>`;
                    }
                    if (absentStudents.length === 0 && lateStudents.length === 0) {
                        html += `<div style="color: #62CC3C; font-size: 0.9em;">✅ Todos presentes</div>`;
                    }
                    html += `</div>`;
                }
                html += '</div>';
            }

            // Student list with individual stats
            html += '<div class="modal-section"><h3>Alunos</h3><div class="group-list" style="gap: 8px;">';
            for (const student of students.sort((a, b) => a.name.localeCompare(b.name))) {
                // Calculate individual attendance for this activity
                const studentRecords = (student.attendance || []).filter(a => a.activity_type === type && a.activity_name === name);
                const stuPresent = studentRecords.filter(a => ['presente', 'atrasado'].includes(a.status)).length;
                const stuTotal = studentRecords.length;
                const stuPct = stuTotal > 0 ? Math.round(stuPresent / stuTotal * 100) : 0;
                const pctClass = stuPct >= 90 ? 'good' : (stuPct >= 75 ? 'warning' : 'danger');

                html += `<div class="group-item" onclick="showStudentDetail(${student.id})">`;
                html += `<span class="name">${student.name}</span>`;
                html += `<span class="pct ${stuTotal > 0 ? pctClass : 'neutral'}">${stuTotal > 0 ? stuPct + '%' : '-'}</span>`;
                html += `</div>`;
            }
            html += '</div></div>';

            // Show modal
            document.getElementById('modal-title').textContent = displayName;
            document.getElementById('modal-body').innerHTML = html;
            document.getElementById('student-modal').classList.add('active');
        }

        function showStudentDetail(studentId) {
            const student = studentData[studentId];
            if (!student) {
                alert('Dados do aluno não encontrados');
                return;
            }

            document.getElementById('modal-title').textContent = `[${student.id}] ${student.name}`;

            let html = '';

            // Info section
            html += '<div class="modal-section"><h3>Informações</h3><div class="student-info">';
            html += `<div class="student-info-item"><div class="label">Banda</div>${student.band}</div>`;
            if (student.instrument) {
                let instrumentDisplay = student.instrument;
                if (student.pratica_level) {
                    const internalMark = student.pratica_internal ? ' <span style="color:#f39c12;font-size:0.8em">(int)</span>' : '';
                    instrumentDisplay += ` - Nível ${student.pratica_level}${internalMark}`;
                }
                html += `<div class="student-info-item"><div class="label">Instrumento</div>${instrumentDisplay}</div>`;
            }
            if (student.theory) {
                let theoryDisplay = student.theory.replace('teoria_', 'Teoria ').replace('_', ' ').toUpperCase();
                if (student.teoria_level) {
                    const internalMark = student.teoria_internal ? ' <span style="color:#f39c12;font-size:0.8em">(int)</span>' : '';
                    theoryDisplay += ` - Nível ${student.teoria_level}${internalMark}`;
                }
                html += `<div class="student-info-item"><div class="label">Teoria</div>${theoryDisplay}</div>`;
            }
            html += '</div></div>';

            // Stats section
            const stats = student.stats;
            const total = stats.total || 0;
            const pct = total > 0 ? Math.round((stats.presente + stats.atrasado) / total * 100) : 0;
            html += '<div class="modal-section"><h3>Resumo do Mês</h3><div class="stats-row">';
            html += `<div class="mini-stat"><div class="value" style="color:#62CC3C">${stats.presente || 0}</div><div class="label">Presentes</div></div>`;
            html += `<div class="mini-stat"><div class="value" style="color:#FEF100">${stats.atrasado || 0}</div><div class="label">Atrasados</div></div>`;
            html += `<div class="mini-stat"><div class="value" style="color:#E74C3C">${stats.falta || 0}</div><div class="label">Faltas</div></div>`;
            html += `<div class="mini-stat"><div class="value" style="color:#f39c12">${stats.justificada || 0}</div><div class="label">Justif.</div></div>`;
            const pctColor = pct >= 75 ? '#62CC3C' : (pct >= 50 ? '#FEF100' : '#E74C3C');
            html += `<div class="mini-stat"><div class="value" style="color:${pctColor}">${pct}%</div><div class="label">Frequência</div></div>`;
            html += '</div></div>';

            // Attendance history
            if (student.attendance && student.attendance.length > 0) {
                html += '<div class="modal-section"><h3>Histórico Recente</h3><div class="attendance-grid">';
                for (const a of student.attendance) {
                    let statusClass = 'presente';
                    let statusText = 'Presente';
                    if (a.status === 'atrasado') { statusClass = 'atrasado'; statusText = 'Atrasado'; }
                    else if (a.status === 'falta' || a.status === 'falta_nao_justificada') { statusClass = 'falta'; statusText = 'Falta'; }
                    else if (a.status === 'falta_justificada') { statusClass = 'justificada'; statusText = 'Justificada'; }

                    let activityName = a.activity_name;
                    if (a.activity_type === 'teoria') {
                        activityName = activityName.replace('teoria_', 'T').replace('_', ' ');
                    }

                    html += `<div class="attendance-item">
                        <div class="date">${a.date}</div>
                        <div class="activity">${activityName}</div>
                        <div class="status ${statusClass}">${statusText}</div>
                    </div>`;
                }
                html += '</div></div>';
            }

            // Behavior incidents
            if (student.incidents && student.incidents.length > 0) {
                html += '<div class="modal-section"><h3>Ocorrências</h3>';
                for (const inc of student.incidents) {
                    html += `<div class="incident-item">
                        <span class="severity ${inc.severity}">${inc.severity.toUpperCase()}</span>
                        <span class="date">${inc.date}</span>
                        <div style="margin-top:5px">${inc.description}</div>
                    </div>`;
                }
                html += '</div>';
            }

            document.getElementById('modal-body').innerHTML = html;
            document.getElementById('student-modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('student-modal').classList.remove('active');
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
        });

        function generateMonthlyCards(bandName) {
            // Get students in this band
            const students = Object.values(studentData).filter(s => s.band === bandName);
            if (students.length === 0) {
                alert('Nenhum aluno encontrado na ' + bandName);
                return;
            }

            const monthNames = ['', 'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                               'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            const now = new Date();
            const monthName = monthNames[now.getMonth() + 1];
            const year = now.getFullYear();

            let allCards = [];

            for (const student of students) {
                const stats = student.stats || {};
                const total = stats.total || 0;
                const presente = stats.presente || 0;
                const atrasado = stats.atrasado || 0;
                const falta = stats.falta || 0;
                const justificada = stats.justificada || 0;

                // Build instrument line with level
                let instrumentLine = '';
                if (student.instrument) {
                    instrumentLine = student.instrument;
                    if (student.pratica_level) {
                        const internalMark = student.pratica_internal ? ' (int)' : '';
                        instrumentLine += ` - Nível ${student.pratica_level}${internalMark}`;
                    }
                }

                // Build teoria line with level
                let teoriaLine = '';
                if (student.teoria_level) {
                    const internalMark = student.teoria_internal ? ' (int)' : '';
                    teoriaLine = `Teoria - Nível ${student.teoria_level}${internalMark}`;
                }

                // Count behavior incidents this month
                const monthStr = `${year}-${String(now.getMonth() + 1).padStart(2, '0')}`;
                const monthIncidents = (student.incidents || []).filter(i => i.date.startsWith(monthStr));
                const incidentCounts = {'leve': 0, 'medio': 0, 'grave': 0};
                monthIncidents.forEach(i => {
                    if (incidentCounts[i.severity] !== undefined) incidentCounts[i.severity]++;
                });

                // Determine status
                let status = '✅ SEM ADVERTÊNCIA';
                if (falta >= 3) {
                    status = '🔴 SUSPENSÃO PENDENTE';
                } else if (falta >= 2) {
                    status = '🟠 EM OBSERVAÇÃO';
                } else if (falta >= 1) {
                    status = '🟡 ADVERTÊNCIA';
                }

                // Build card
                let card = `📊 RELATÓRIO MENSAL - ${monthName.toUpperCase()} ${year}\n`;
                card += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n`;
                card += `👤 ${student.name} (ID ${student.id})\n`;
                if (instrumentLine) card += `🎺 ${instrumentLine}\n`;
                if (teoriaLine) card += `📖 ${teoriaLine}\n`;
                card += `🎵 ${student.band}\n\n`;

                card += `📅 FREQUÊNCIA\n`;
                card += `   Atividades: ${total}\n`;
                card += `   ✅ Presenças: ${presente}\n`;
                card += `   ⏰ Atrasos: ${atrasado}/3\n`;
                card += `   ❌ Faltas: ${falta}/3\n`;
                if (justificada > 0) {
                    card += `   📝 Justificadas: ${justificada}\n`;
                }
                card += `\n`;

                card += `📋 COMPORTAMENTO\n`;
                if (monthIncidents.length === 0) {
                    card += `   ✨ Nenhuma ocorrência\n`;
                } else {
                    let incParts = [];
                    if (incidentCounts.grave > 0) incParts.push(`${incidentCounts.grave} grave`);
                    if (incidentCounts.medio > 0) incParts.push(`${incidentCounts.medio} média`);
                    if (incidentCounts.leve > 0) incParts.push(`${incidentCounts.leve} leve`);
                    card += `   ⚠️ ${incParts.join(', ')}\n`;
                }
                card += `\n`;

                card += `${status}\n\n`;
                card += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
                card += `Dúvidas? Fale com a coordenação.`;

                allCards.push(card);
            }

            // Show modal with all cards
            const cardsText = allCards.join('\n\n\n');

            // Create a modal to show the cards
            const modal = document.createElement('div');
            modal.className = 'modal-overlay active';
            modal.id = 'cards-modal';
            modal.onclick = function(e) { if (e.target === this) this.remove(); };
            modal.innerHTML = `
                <div class="modal" style="max-width: 700px;">
                    <div class="modal-header">
                        <h2>Fichas - ${bandName}</h2>
                        <button class="modal-close" onclick="document.getElementById('cards-modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p style="color: rgba(255,255,255,0.6); margin-bottom: 15px;">
                            ${students.length} fichas geradas. Copie individualmente ou todas de uma vez.
                        </p>
                        <button onclick="copyAllCards()" style="background: linear-gradient(90deg, #FEF100, #62CC3C); color: #3E0B59; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; margin-bottom: 15px;">
                            📋 Copiar Todas
                        </button>
                        <div id="cards-container" style="max-height: 60vh; overflow-y: auto;">
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // Add individual cards with copy buttons
            const container = document.getElementById('cards-container');
            allCards.forEach((card, i) => {
                const cardDiv = document.createElement('div');
                cardDiv.style.cssText = 'background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px; margin-bottom: 10px; position: relative;';
                cardDiv.innerHTML = `
                    <button onclick="copyCard(${i})" style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.1); border: none; color: #fff; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8em;">Copiar</button>
                    <pre style="white-space: pre-wrap; font-family: monospace; color: #fff; margin: 0; font-size: 0.85em;" id="card-${i}">${card}</pre>
                `;
                container.appendChild(cardDiv);
            });

            // Store cards for copying
            window.monthlyCards = allCards;
        }

        function copyCard(index) {
            const card = window.monthlyCards[index];
            navigator.clipboard.writeText(card).then(() => {
                // Brief visual feedback
                const btn = event.target;
                btn.textContent = '✓ Copiado';
                setTimeout(() => btn.textContent = 'Copiar', 1500);
            });
        }

        function copyAllCards() {
            const allText = window.monthlyCards.join('\n\n---\n\n');
            navigator.clipboard.writeText(allText).then(() => {
                const btn = event.target;
                btn.textContent = '✓ Todas copiadas!';
                setTimeout(() => btn.textContent = '📋 Copiar Todas', 2000);
            });
        }
    </script>
</body>
</html>
